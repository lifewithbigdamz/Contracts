warning: use of deprecated method `soroban_sdk::events::Events::publish`: use the #[contractevent] macro on a contract event type
   --> contracts/vesting_contracts/src/test.rs:609:22
    |
609 | ...().publish((S...
    |       ^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: use of deprecated method `soroban_sdk::events::Events::publish`: use the #[contractevent] macro on a contract event type
   --> contracts/vesting_contracts/src/test.rs:614:14
    |
614 | ...  .publish((S...
    |       ^^^^^^^

warning: variable does not need to be mutable
   --> contracts/vesting_contracts/src/lib.rs:695:13
    |
695 | ...et mut vault: V...
    |       ----^^^^^
    |       |
    |       help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` on by default

warning: unused variable: `vault`
   --> contracts/vesting_contracts/src/lib.rs:921:13
    |
921 | ...et vault: V...
    |       ^^^^^ help: if this is intentional, prefix it with an underscore: `_vault`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `vault`
   --> contracts/vesting_contracts/src/lib.rs:940:17
    |
940 | ...et vault: V...
    |       ^^^^^ help: if this is intentional, prefix it with an underscore: `_vault`

warning: unused variable: `vault`
    --> contracts/vesting_contracts/src/lib.rs:1072:17
     |
1072 | ...ut vault: V...
     |       ^^^^^ help: if this is intentional, prefix it with an underscore: `_vault`

warning: variable does not need to be mutable
    --> contracts/vesting_contracts/src/lib.rs:1072:13
     |
1072 | ...et mut vault: V...
     |       ----^^^^^
     |       |
     |       help: remove this `mut`

warning: unused variable: `contract_id`
   --> contracts/vesting_contracts/src/test.rs:237:19
    |
237 | ...v, contract_id, c...
    |       ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_contract_id`

warning: unused variable: `admin`
   --> contracts/vesting_contracts/src/test.rs:237:40
    |
237 | ...t, admin, _...
    |       ^^^^^ help: if this is intentional, prefix it with an underscore: `_admin`

warning: unused variable: `env`
   --> contracts/vesting_contracts/src/test.rs:980:14
    |
980 | ...t (env, _...
    |       ^^^ help: if this is intentional, prefix it with an underscore: `_env`

warning: unused variable: `unauthorized_user`
    --> contracts/vesting_contracts/src/test.rs:1136:9
     |
1136 | ...et unauthorized_user = ...
     |       ^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_unauthorized_user`

warning: `vesting_contracts` (lib test) generated 11 warnings (run `cargo fix --lib -p vesting_contracts --tests` to apply 2 suggestions)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.39s
     Running unittests src/lib.rs (target/debug/deps/vesting_contracts-32453a85d6dfba75)

running 49 tests
Writing test snapshot file for test "test::tests::test_batch_vault_creation" to "test_snapshots/test/tests/test_batch_vault_creation.1.json".
Writing test snapshot file for test "
thread 'test::tests::test_batch_create_vaults_fulltest::tests::test_clawback_after_grace_period_panics"' panicked at  to /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs":test_snapshots/test/tests/test_batch_create_vaults_full.1.json907":.
9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", clawback_vault, [1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Grace period expired' from contract function 'Symbol(obj#471)'", 1]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, clawback_vault], data:1

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
Writing test snapshot file for test "test::tests::test_batch_create_vaults_lazy" to "test_snapshots/test/tests/test_batch_create_vaults_lazy.1.json".
Writing test snapshot file for test "test::tests::test_clawback_after_grace_period_panics" to "test_snapshots/test/tests/test_clawback_after_grace_period_panics.1.json".
Writing test snapshot file for test "test::tests::test_admin_access_control" to "test_snapshots/test/tests/test_admin_access_control.1.json".
Writing test snapshot file for test "test::tests::test_clawback_within_grace_period" to "test_snapshots/test/tests/test_clawback_within_grace_period.1.json".

thread 'test::tests::test_claim_before_any_milestone_unlocked_panics' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'No tokens available to claim' from contract function 'Symbol(obj#593)'", 1, 1]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 1]

Writing test snapshot file for test "test::tests::test_claim_before_any_milestone_unlocked_panics" to "test_snapshots/test/tests/test_claim_before_any_milestone_unlocked_panics.1.json".
test test::tests::test_admin_access_control ... ok
test test::tests::test_clawback_within_grace_period ... ok
test test::tests::test_batch_create_vaults_lazy ... ok
test test::tests::test_batch_create_vaults_full ... ok
test test::tests::test_claim_before_any_milestone_unlocked_panics - should panic ... ok
Writing test snapshot file for test "test::tests::test_admin_ownership_transfer" to "test_snapshots/test/tests/test_admin_ownership_transfer.1.json".
test test::tests::test_clawback_after_grace_period_panics - should panic ... ok
test test::tests::test_batch_vault_creation ... ok

thread 'test::tests::test_global_pause_functionality' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(Auth, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(Auth, InvalidAction)], data:["contract call failed", toggle_pause, []]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(Auth, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(Auth, InvalidAction)], data:"escalating error to panic"
   4: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(Auth, InvalidAction)], data:["Unauthorized function call for address", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCT4]
   5: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, toggle_pause], data:Void


thread 'test::tests::test_linear_vesting_step_duration_zero' panicked at contracts/vesting_contracts/src/test.rs:412:5:
assertion `left == right` failed: Should have 50% of tokens after half the time for linear vesting
  left: 598356
 right: 600000
Writing test snapshot file for test "test::tests::test_linear_vesting_step_duration_zero" to "test_snapshots/test/tests/test_linear_vesting_step_duration_zero.1.json".
Writing test snapshot file for test "test::tests::test_create_vault_lazy_increments_count" to "test_snapshots/test/tests/test_create_vault_lazy_increments_count.1.json".

thread 'test::tests::test_global_pause_functionality' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 100]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Token not set - call set_token first' from contract function 'Symbol(obj#449)'", 1, 100]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 100]

test test::tests::test_admin_ownership_transfer ... ok

thread 'test::tests::test_global_pause_functionality' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_as_delegate, [1, 100]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Milestones not configured' from contract function 'Symbol(obj#661)'", 1, 100]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_as_delegate], data:[1, 100]

Writing test snapshot file for test "test::tests::test_create_vault_full_increments_count" to "test_snapshots/test/tests/test_create_vault_full_increments_count.1.json".

thread 'test::tests::test_global_pause_functionality' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 100]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Token not set - call set_token first' from contract function 'Symbol(obj#939)'", 1, 100]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 100]

test test::tests::test_linear_vesting_step_duration_zero ... FAILED
Writing test snapshot file for test "test::tests::test_global_pause_functionality" to "test_snapshots/test/tests/test_global_pause_functionality.1.json".
Writing test snapshot file for test "test::tests::test_lockup_only_claim_succeeds_at_end" to "test_snapshots/test/tests/test_lockup_only_claim_succeeds_at_end.1.json".

thread 'test::tests::test_lockup_only_claim_fails_before_end' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'No tokens available to claim' from contract function 'Symbol(obj#471)'", 1, 1]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 1]

Writing test snapshot file for test "test::tests::test_lockup_only_claim_fails_before_end" to "test_snapshots/test/tests/test_lockup_only_claim_fails_before_end.1.json".
test test::tests::test_create_vault_lazy_increments_count ... ok
Writing test snapshot file for test "test::tests::test_invariant_holds_after_operations" to "test_snapshots/test/tests/test_invariant_holds_after_operations.1.json".
Writing test snapshot file for test "test::tests::test_mark_irrevocable_flag" to "test_snapshots/test/tests/test_mark_irrevocable_flag.1.json".
test test::tests::test_global_pause_functionality ... FAILED
test test::tests::test_create_vault_full_increments_count ... ok
test test::tests::test_lockup_only_claim_fails_before_end - should panic ... ok
Writing test snapshot file for test "test::tests::test_milestone_unlocking_and_claim_limits" to "test_snapshots/test/tests/test_milestone_unlocking_and_claim_limits.1.json".
test test::tests::test_lockup_only_claim_succeeds_at_end ... ok
test test::tests::test_milestone_unlocking_and_claim_limits ... ok

thread 'test::tests::test_periodic_vesting_claim_partial' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 15000]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Token not set - call set_token first' from contract function 'Symbol(obj#197)'", 1, 15000]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 15000]

test test::tests::test_mark_irrevocable_flag ... ok
Writing test snapshot file for test "test::tests::test_periodic_vesting_claim_partial" to "test_snapshots/test/tests/test_periodic_vesting_claim_partial.1.json".
test test::tests::test_invariant_holds_after_operations ... ok

thread 'test::tests::test_periodic_vesting_monthly_steps' panicked at contracts/vesting_contracts/src/test.rs:301:5:
assertion `left == right` failed: Should have exactly one month of tokens after 30 days
  left: 98630
 right: 100000
Writing test snapshot file for test "test::tests::test_periodic_vesting_monthly_steps" to "test_snapshots/test/tests/test_periodic_vesting_monthly_steps.1.json".

thread 'test::tests::test_periodic_vesting_weekly_steps' panicked at contracts/vesting_contracts/src/test.rs:364:5:
assertion `left == right` failed: Should have three weeks of tokens after 3 weeks
  left: 29917
 right: 30000
Writing test snapshot file for test "test::tests::test_periodic_vesting_weekly_steps" to "test_snapshots/test/tests/test_periodic_vesting_weekly_steps.1.json".

thread 'test::tests::test_migrate_liquidity_blocks_admin_actions_afterwards' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", create_vault_full, [CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDR4, 1000, 0, 1000, 0, true, false, 0]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Contract is deprecated' from contract function 'Symbol(obj#843)'", CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDR4, 1000, 0, 1000, 0, true, false, 0]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, create_vault_full], data:[CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDR4, 1000, 0, 1000, 0, true, false, 0]

test test::tests::test_periodic_vesting_claim_partial ... FAILED
Writing test snapshot file for test "test::tests::test_migrate_liquidity_blocks_admin_actions_afterwards" to "test_snapshots/test/tests/test_migrate_liquidity_blocks_admin_actions_afterwards.1.json".
test test::tests::test_periodic_vesting_monthly_steps ... FAILED
Writing test snapshot file for test "test::tests::test_milestone_unlock_and_claim" to "test_snapshots/test/tests/test_milestone_unlock_and_claim.1.json".
Writing test snapshot file for test "test::tests::test_migrate_liquidity_freezes_and_transfers_whitelisted_balances" to "test_snapshots/test/tests/test_migrate_liquidity_freezes_and_transfers_whitelisted_balances.1.json".
test test::tests::test_periodic_vesting_weekly_steps ... FAILED
test test::tests::test_migrate_liquidity_blocks_admin_actions_afterwards ... ok
test test::tests::test_migrate_liquidity_freezes_and_transfers_whitelisted_balances ... ok
test test::tests::test_milestone_unlock_and_claim ... ok
Writing test snapshot file for test "test::tests::test_rescue_basic_no_vaults" to "test_snapshots/test/tests/test_rescue_basic_no_vaults.1.json".
Writing test snapshot file for test "test::tests::test_rescue_after_partial_claim_adjusts_liability" to "test_snapshots/test/tests/test_rescue_after_partial_claim_adjusts_liability.1.json".
Writing test snapshot file for test "test::tests::test_rescue_after_full_claim_all_tokens_rescuable" to "test_snapshots/test/tests/test_rescue_after_full_claim_all_tokens_rescuable.1.json".
Writing test snapshot file for test "test::tests::test_rescue_after_revoke_liability_drops_to_zero" to "test_snapshots/test/tests/test_rescue_after_revoke_liability_drops_to_zero.1.json".
Writing test snapshot file for test "test::tests::test_rescue_only_surplus_above_vault_liability" to "test_snapshots/test/tests/test_rescue_only_surplus_above_vault_liability.1.json".
test test::tests::test_rescue_basic_no_vaults ... ok
test test::tests::test_rescue_after_full_claim_all_tokens_rescuable ... ok
Writing test snapshot file for test "test::tests::test_rescue_multiple_vaults_correct_liability_sum" to "test_snapshots/test/tests/test_rescue_multiple_vaults_correct_liability_sum.1.json".
test test::tests::test_rescue_after_partial_claim_adjusts_liability ... ok

thread 'test::tests::test_rescue_panics_when_contract_balance_zero' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", rescue_unallocated_tokens, [CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'No unallocated tokens to rescue' from contract function 'Symbol(obj#491)'", CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]
   4: [Failed Diagnostic Event (not emitted)] contract:CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN, topics:[fn_return, balance], data:0
   5: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[fn_call, CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN, balance], data:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM
   6: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, rescue_unallocated_tokens], data:CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN

test test::tests::test_rescue_only_surplus_above_vault_liability ... ok
Writing test snapshot file for test "test::tests::test_rescue_panics_when_contract_balance_zero" to "test_snapshots/test/tests/test_rescue_panics_when_contract_balance_zero.1.json".

thread 'test::tests::test_rescue_panics_for_non_whitelisted_token' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", rescue_unallocated_tokens, [CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Token is not whitelisted' from contract function 'Symbol(obj#473)'", CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, rescue_unallocated_tokens], data:CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN

test test::tests::test_rescue_after_revoke_liability_drops_to_zero ... ok
Writing test snapshot file for test "test::tests::test_rescue_panics_for_non_whitelisted_token" to "test_snapshots/test/tests/test_rescue_panics_for_non_whitelisted_token.1.json".
Writing test snapshot file for test "test::tests::test_rotate_beneficiary_key" to "test_snapshots/test/tests/test_rotate_beneficiary_key.1.json".
test test::tests::test_rescue_panics_for_non_whitelisted_token - should panic ... ok
test test::tests::test_rescue_panics_when_contract_balance_zero - should panic ... ok

thread 'test::tests::test_rescue_panics_when_no_surplus' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", rescue_unallocated_tokens, [CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'No unallocated tokens to rescue' from contract function 'Symbol(obj#687)'", CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN]
   4: [Failed Diagnostic Event (not emitted)] contract:CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN, topics:[fn_return, balance], data:3000
   5: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[fn_call, CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN, balance], data:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM
   6: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, rescue_unallocated_tokens], data:CCABDO7UZXYE4W6GVSEGSNNZTKSLFQGKXXQTH6OX7M7GKZ4Z6CUJNGZN

Writing test snapshot file for test "test::tests::test_rescue_panics_when_no_surplus" to "test_snapshots/test/tests/test_rescue_panics_when_no_surplus.1.json".

thread 'test::tests::test_rescue_yield_token_panics' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", rescue_unallocated_tokens, [CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Cannot rescue yield-bearing token. Yield is distributed to beneficiaries on claim.' from contract function 'Symbol(obj#331)'", CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF]
   4: [Failed Diagnostic Event (not emitted)] contract:CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF, topics:[fn_return, balance], data:1000000000
   5: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[fn_call, CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF, balance], data:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM
   6: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, rescue_unallocated_tokens], data:CBUSYNQKASUYFWYC3M2GUEDMX4AIVWPALDBYJPNK6554BREHTGZ2IUNF

Writing test snapshot file for test "test::tests::test_rescue_yield_token_panics" to "test_snapshots/test/tests/test_rescue_yield_token_panics.1.json".

thread 'test::tests::test_step_vesting_fuzz' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", claim_tokens, [1, 1009]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Token not set - call set_token first' from contract function 'Symbol(obj#197)'", 1, 1009]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, claim_tokens], data:[1, 1009]

Writing test snapshot file for test "test::tests::test_step_vesting_fuzz" to "test_snapshots/test/tests/test_step_vesting_fuzz.1.json".
Writing test snapshot file for test "test::tests::test_rescue_tokens_go_to_current_admin_after_transfer" to "test_snapshots/test/tests/test_rescue_tokens_go_to_current_admin_after_transfer.1.json".

thread 'test::tests::test_revoke_irrevocable_vault_panics' panicked at /home/lawless-pad/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/soroban-env-host-25.0.1/src/host.rs:907:9:
HostError: Error(WasmVm, InvalidAction)

Event log (newest first):
   0: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:"escalating error to panic"
   1: [Diagnostic Event] topics:[error, Error(WasmVm, InvalidAction)], data:["contract call failed", revoke_tokens, [1]]
   2: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[error, Error(WasmVm, InvalidAction)], data:"caught error from function"
   3: [Failed Diagnostic Event (not emitted)] contract:CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, topics:[log], data:["caught panic 'Vault is irrevocable' from contract function 'Symbol(obj#599)'", 1]
   4: [Diagnostic Event] topics:[fn_call, CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD2KM, revoke_tokens], data:1

Writing test snapshot file for test "test::tests::test_revoke_irrevocable_vault_panics" to "test_snapshots/test/tests/test_revoke_irrevocable_vault_panics.1.json".
test test::tests::test_rescue_multiple_vaults_correct_liability_sum ... ok
test test::tests::test_rescue_yield_token_panics - should panic ... ok
test test::tests::test_step_vesting_fuzz ... FAILED
test test::tests::test_rotate_beneficiary_key ... ok
Writing test snapshot file for test "test::tests::test_vault_creation_access_control" to "test_snapshots/test/tests/test_vault_creation_access_control.1.json".
test test::tests::test_rescue_panics_when_no_surplus - should panic ... ok
test test::tests::test_revoke_irrevocable_vault_panics - should panic ... ok
test test::tests::test_rescue_tokens_go_to_current_admin_after_transfer ... ok
test test::tests::test_vault_creation_access_control ... ok
Writing test snapshot file for test "test::tests::test_step_vesting_full_claim_at_end" to "test_snapshots/test/tests/test_step_vesting_full_claim_at_end.1.json".
Writing test snapshot file for test "test::tests::test_vault_start_time_immutable" to "test_snapshots/test/tests/test_vault_start_time_immutable.1.json".
Writing test snapshot file for test "test::tests::test_yield_is_distributed_on_claim" to "test_snapshots/test/tests/test_yield_is_distributed_on_claim.1.json".
Writing test snapshot file for test "test::tests::test_yield_on_partial_claim" to "test_snapshots/test/tests/test_yield_on_partial_claim.1.json".
Writing test snapshot file for test "test::tests::test_zero_duration_vault_before_start" to "test_snapshots/test/tests/test_zero_duration_vault_before_start.1.json".
test test::tests::test_vault_start_time_immutable ... ok
Writing test snapshot file for test "test::tests::test_zero_amount_vault_no_claimable" to "test_snapshots/test/tests/test_zero_amount_vault_no_claimable.1.json".
Writing test snapshot file for test "test::tests::test_zero_cliff_vault_vests_immediately" to "test_snapshots/test/tests/test_zero_cliff_vault_vests_immediately.1.json".
test test::tests::test_zero_duration_vault_before_start ... ok
test test::tests::test_yield_is_distributed_on_claim ... ok
test test::tests::test_zero_amount_vault_no_claimable ... ok
test test::tests::test_yield_on_partial_claim ... ok
test test::tests::test_zero_cliff_vault_vests_immediately ... ok
test test::tests::test_step_vesting_full_claim_at_end ... ok
Writing test snapshot file for test "test::tests::test_yield_proportional_with_multiple_vaults" to "test_snapshots/test/tests/test_yield_proportional_with_multiple_vaults.1.json".
Writing test snapshot file for test "test::tests::test_zero_duration_vault_claim_full" to "test_snapshots/test/tests/test_zero_duration_vault_claim_full.1.json".
Writing test snapshot file for test "test::tests::test_zero_duration_zero_amount_vault" to "test_snapshots/test/tests/test_zero_duration_zero_amount_vault.1.json".
Writing test snapshot file for test "test::tests::test_zero_duration_vault_immediate_unlock" to "test_snapshots/test/tests/test_zero_duration_vault_immediate_unlock.1.json".
test test::tests::test_zero_duration_vault_claim_full ... ok
test test::tests::test_zero_duration_zero_amount_vault ... ok
test test::tests::test_yield_proportional_with_multiple_vaults ... ok
test test::tests::test_zero_duration_vault_immediate_unlock ... ok

failures:

failures:
    test::tests::test_global_pause_functionality
    test::tests::test_linear_vesting_step_duration_zero
    test::tests::test_periodic_vesting_claim_partial
    test::tests::test_periodic_vesting_monthly_steps
    test::tests::test_periodic_vesting_weekly_steps
    test::tests::test_step_vesting_fuzz

test result: FAILED. 43 passed; 6 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.08s

error: test failed, to rerun pass `-p vesting_contracts --lib`
